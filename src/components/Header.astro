---
const { lang, t } = Astro.props;

const languages = [
  { code: "es", label: t.languageOptions.es },
  { code: "en", label: t.languageOptions.en },
];

const navItems = [
  {
    title: t.nav.home,
    label: "home",
    url: "#home",
  },
  {
    title: t.nav.experience,
    label: "experience",
    url: "#experience",
  },
  {
    title: t.nav.projects,
    label: "projects",
    url: "#projects",
  },
  {
    title: t.nav.about,
    label: "about-me",
    url: "#about-me",
  },
  {
    title: t.nav.contact,
    label: "contact",
    url: "mailto:alan.figueroa@hotmail.com",
  },
];
---

<header>
  <nav>
    <div class="menu-toggle" aria-label="menu" role="button" tabindex="0">
      <svg
        class="menu-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        width="24"
        height="24"
        aria-hidden="true"
        focusable="false"
      >
        <path fill="currentColor" d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"
        ></path>
      </svg>
    </div>
    <ul>
      {
        navItems.map((link) => (
          <li>
            <a aria-label={link.label} href={link.url}>
              {link.title}
            </a>
          </li>
        ))
      }
    </ul>
  </nav>

  <form id="lang-form" class="ml-[30px] hidden md:block">
    <div class="relative">
      <select
        id="lang-select"
        class="appearance-none block w-full bg-none bg-gray-700 border border-transparent rounded-md py-2 pl-3 pr-10 text-base text-gray-300 focus:outline-none focus:ring-white focus:border-white sm:text-sm"
      >
        {
          languages.map((langOpt) => (
            <option value={langOpt.code} selected={langOpt.code === lang}>
              {langOpt.label}
            </option>
          ))
        }
      </select>
      <div
        class="pointer-events-none absolute inset-y-0 right-0 px-2 flex items-center"
      >
        <!-- Heroicon name: solid/chevron-down -->
        <svg
          class="h-4 w-4 text-white"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          aria-hidden="true"
        >
          <path
            fill-rule="evenodd"
            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
            clip-rule="evenodd"></path>
        </svg>
      </div>
    </div>
  </form>
</header>

<script>
  import { initLanguageSwitcher } from "../scripts/languageSwitcher";
  import { initNavigation } from "../scripts/navigation";

  document.addEventListener("DOMContentLoaded", () => {
    initLanguageSwitcher();
    initNavigation();
  });
</script>

<style>
  html {
    scroll-behavior: smooth;
  }

  header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 25px 40px;
    display: flex;
    justify-content: end;
    align-items: center;
    z-index: 1000;
    background: rgba(12, 15, 23, 0.8);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(42, 252, 133, 0.1);
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.5rem;
    font-weight: 700;
    color: #e6e9f0;
    text-decoration: none;
  }

  .logo-icon {
    color: #2afc85;
    font-size: 1.8rem;
  }

  .logo-text {
    background: linear-gradient(90deg, #e6e9f0 0%, #2afc85 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  nav ul {
    display: flex;
    list-style: none;
    gap: 30px;
  }

  nav a {
    color: #c2c6d3;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    position: relative;
    padding: 5px 0;
  }

  nav a:hover {
    color: #2afc85;
  }

  nav a::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: #2afc85;
    transition: width 0.3s ease;
  }

  nav a:hover::after {
    width: 100%;
  }

  nav a.active {
    color: #2afc85;
  }

  nav a.active::after {
    width: 100%;
  }

  .menu-toggle {
    display: none;
    font-size: 1.5rem;
    color: #e6e9f0;
    cursor: pointer;
  }

  .menu-toggle:focus {
    outline: none;
  }

  .menu-toggle:focus-visible {
    outline: 2px solid rgba(42, 252, 133, 0.15);
    border-radius: 4px;
  }

  .menu-icon {
    width: 1.5rem;
    height: 1.5rem;
    display: inline-block;
  }

  @media (max-width: 768px) {
    header {
      padding: 15px 20px;
    }

    nav ul {
      position: fixed;
      top: 67px;
      left: -100%;
      width: 100%;
      height: calc(100vh - 70px);
      background: rgba(12, 15, 23, 0.95);
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 50px;
      transition: left 0.3s ease;
    }

    nav ul.active {
      left: 0;
    }

    nav a {
      font-size: 1.2rem;
      padding: 15px 0;
    }

    .menu-toggle {
      display: block;
    }

    nav ul .mobile-lang-form {
      margin-left: 0 !important;
      align-self: center;
      width: calc(100% - 40px);
      padding: 0 20px;
      display: flex !important;
      justify-content: center;
    }
  }
</style>
